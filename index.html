<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N4 Master - Luyá»‡n thi JLPT/NAT-TEST Tá»‘c Ä‘á»™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #fcfbf9; /* Warm neutral background */
            color: #44403c;
        }
        .jp-font {
            font-family: 'Noto Sans JP', sans-serif;
        }
        
        /* Flashcard Flip Effect */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .card-flip-inner { transition: transform 0.6s; }
        .group:hover .card-flip-inner.hover-trigger { transform: rotateY(180deg); }
        .flipped { transform: rotateY(180deg); }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d6d3d1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8a29e; }

        /* Chart Container */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px; /* Reduced for dashboard balance */
            height: 250px;
            margin: 0 auto;
        }

        /* Reading Text Highlight */
        .lookup-word {
            cursor: pointer;
            border-bottom: 2px dashed #a8a29e;
            transition: all 0.2s;
        }
        .lookup-word:hover {
            background-color: #fef3c7;
            border-bottom-color: #d97706;
            color: #d97706;
        }

        /* Tab Animation */
        .tab-content {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="h-screen flex flex-col md:flex-row overflow-hidden text-stone-700">

    <!-- Sidebar Navigation -->
    <aside class="w-full md:w-64 bg-stone-100 border-r border-stone-200 flex-shrink-0 flex flex-col z-20 shadow-sm">
        <div class="p-6 flex items-center justify-center border-b border-stone-200">
            <div class="text-2xl font-bold text-red-600 mr-2">â›©ï¸</div>
            <h1 class="text-xl font-bold tracking-tight text-stone-800">N4 Master</h1>
        </div>
        
        <nav class="flex-1 overflow-y-auto p-4 space-y-2">
            <button onclick="app.switchTab('dashboard')" class="nav-item w-full flex items-center p-3 rounded-xl transition-all hover:bg-white hover:shadow-sm text-stone-600 font-medium bg-white shadow-sm ring-1 ring-stone-200" id="nav-dashboard">
                <span class="mr-3">ğŸ“Š</span> Lá»™ trÃ¬nh & Tiáº¿n Ä‘á»™
            </button>
            <button onclick="app.switchTab('vocab')" class="nav-item w-full flex items-center p-3 rounded-xl transition-all hover:bg-white hover:shadow-sm text-stone-600 font-medium" id="nav-vocab">
                <span class="mr-3">ğŸ´</span> Tá»« vá»±ng (Flashcard)
            </button>
            <button onclick="app.switchTab('kanji')" class="nav-item w-full flex items-center p-3 rounded-xl transition-all hover:bg-white hover:shadow-sm text-stone-600 font-medium" id="nav-kanji">
                <span class="mr-3">âœï¸</span> Kanji & Mnemonics
            </button>
            <button onclick="app.switchTab('grammar')" class="nav-item w-full flex items-center p-3 rounded-xl transition-all hover:bg-white hover:shadow-sm text-stone-600 font-medium" id="nav-grammar">
                <span class="mr-3">abc</span> Ngá»¯ phÃ¡p & VÃ­ dá»¥
            </button>
            <button onclick="app.switchTab('reading')" class="nav-item w-full flex items-center p-3 rounded-xl transition-all hover:bg-white hover:shadow-sm text-stone-600 font-medium" id="nav-reading">
                <span class="mr-3">ğŸ“–</span> Reading (Tra tá»«)
            </button>
        </nav>

        <div class="p-4 border-t border-stone-200 bg-stone-50">
            <div class="text-xs font-semibold text-stone-500 uppercase mb-2">GÃ³i dá»¯ liá»‡u</div>
            <div class="flex items-center text-sm text-emerald-600">
                <span class="w-2 h-2 rounded-full bg-emerald-500 mr-2"></span>
                DungMori N4 Core
            </div>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-hidden relative flex flex-col bg-[#fcfbf9]">
        <!-- Header Mobile -->
        <div class="md:hidden p-4 bg-white border-b border-stone-200 flex justify-between items-center">
            <span class="font-bold">N4 Master</span>
            <button class="text-sm bg-stone-100 px-3 py-1 rounded">Menu</button>
        </div>

        <!-- Content Container -->
        <div id="app-content" class="flex-1 overflow-y-auto p-4 md:p-8 pb-24">
            <!-- Dynamic Content Injected Here -->
        </div>
    </main>

    <!-- JS Logic -->
    <script>
        // --- 1. Database (Simulated from provided PDFs) ---
        const db = {
            vocab: [
                { id: 1, kanji: "æœ¬ç‰©", kana: "ã»ã‚“ã‚‚ã®", mean: "Äá»“ tháº­t, hÃ ng tháº­t", type: "N" },
                { id: 2, kanji: "å½¼", kana: "ã‹ã‚Œ", mean: "Anh áº¥y, báº¡n trai", type: "N" },
                { id: 3, kanji: "å°é¢¨", kana: "ãŸã„ãµã†", mean: "CÆ¡n bÃ£o", type: "N" },
                { id: 4, kanji: "æ´—æ¿¯ç‰©", kana: "ã›ã‚“ãŸãã‚‚ã®", mean: "Äá»“ giáº·t", type: "N" },
                { id: 5, kanji: "éŠåœ’åœ°", kana: "ã‚†ã†ãˆã‚“ã¡", mean: "Khu vui chÆ¡i", type: "N" },
                { id: 6, kanji: "", kana: "ãƒã‚¤ã‚­ãƒ³ã‚°", mean: "Leo nÃºi, dÃ£ ngoáº¡i", type: "N" },
                { id: 7, kanji: "å³ã—ã„", kana: "ãã³ã—ã„", mean: "NghiÃªm kháº¯c", type: "Adj-i" },
                { id: 8, kanji: "æ··ã‚€", kana: "ã“ã‚€", mean: "ÄÃ´ng Ä‘Ãºc", type: "V" },
                { id: 9, kanji: "ä¸ŠãŒã‚‹", kana: "ã‚ãŒã‚‹", mean: "TÄƒng lÃªn, leo lÃªn", type: "V" },
                { id: 10, kanji: "ä¸‹ãŒã‚‹", kana: "ã•ãŒã‚‹", mean: "Giáº£m xuá»‘ng", type: "V" },
                { id: 11, kanji: "ä¹¾ã", kana: "ã‹ã‚ã", mean: "KhÃ´ (quáº§n Ã¡o)", type: "V" },
                { id: 12, kanji: "æ­¢ã‚€", kana: "ã‚„ã‚€", mean: "Táº¡nh (mÆ°a)", type: "V" },
                { id: 13, kanji: "å¶ã†", kana: "ã‹ãªã†", mean: "(Æ¯á»›c mÆ¡) thÃ nh hiá»‡n thá»±c", type: "V" },
                { id: 14, kanji: "æ¥½ã—ã‚€", kana: "ãŸã®ã—ã‚€", mean: "Táº­n hÆ°á»Ÿng", type: "V" },
                { id: 15, kanji: "å®šé£Ÿ", kana: "ã¦ã„ã—ã‚‡ã", mean: "Suáº¥t Äƒn", type: "N" },
                { id: 16, kanji: "éƒ¨ä¸‹", kana: "ã¶ã‹", mean: "Cáº¥p dÆ°á»›i", type: "N" }
            ],
            kanji: [
                { id: 1, char: "åŠ›", kun: "ã¡ã‹ã‚‰", on: "ãƒªãƒ§ã‚¯", mean: "Lá»°C (Sá»©c máº¡nh)", words: ["å”åŠ› (Há»£p tÃ¡c)", "åŠªåŠ› (Ná»— lá»±c)"], mnemonic: "NgÆ°á»i dÃ¹ng sá»©c máº¡nh cÆ¡ báº¯p Ä‘á»ƒ nÃ¢ng váº­t náº·ng." },
                { id: 2, char: "å‹•", kun: "ã†ã”", on: "ãƒ‰ã‚¦", mean: "Äá»˜NG (Chuyá»ƒn Ä‘á»™ng)", words: ["é‹å‹• (Váº­n Ä‘á»™ng)", "è‡ªå‹•è»Š (Ã” tÃ´)", "å‹•ç‰© (Äá»™ng váº­t)"], mnemonic: "DÃ¹ng Lá»°C (åŠ›) Ä‘á»ƒ lÃ m TRá»ŒNG (é‡) lÆ°á»£ng di chuyá»ƒn." },
                { id: 3, char: "åƒ", kun: "ã¯ãŸã‚‰", on: "ãƒ‰ã‚¦", mean: "Äá»˜NG (LÃ m viá»‡c)", words: ["åƒãã¾ã™ (LÃ m viá»‡c)", "åŠ´åƒ (Lao Ä‘á»™ng)"], mnemonic: "NGÆ¯á»œI (äºº) dÃ¹ng Lá»°C (åŠ›) Ä‘á»ƒ tÃ¡c Ä‘á»™ng lÃªn TRá»ŒNG (é‡) lÆ°á»£ng -> LÃ  Ä‘ang lÃ m viá»‡c." },
                { id: 4, char: "é€²", kun: "ã™ã™", on: "ã‚·ãƒ³", mean: "TIáº¾N (Tiáº¿n lÃªn)", words: ["é€²å­¦ (Há»c lÃªn)", "é€²åŒ– (Tiáº¿n hÃ³a)"], mnemonic: "Con chim (éš¹) Ä‘ang Ä‘i (è¾¶) vá» phÃ­a trÆ°á»›c." },
                { id: 5, char: "é›†", kun: "ã‚ã¤", on: "ã‚·ãƒ¥ã‚¦", mean: "Táº¬P (Tá»¥ táº­p)", words: ["é›†ã¾ã‚Šã¾ã™ (Táº­p trung)", "é›†åˆ (Táº­p há»£p)"], mnemonic: "Chim (éš¹) Ä‘áº­u trÃªn cÃ¢y (æœ¨) lÃ  lÃºc chÃºng tá»¥ táº­p vá» tá»•." },
                { id: 6, char: "æ›œ", kun: "", on: "ãƒ¨ã‚¦", mean: "DIá»†U (Thá»©)", words: ["æ—¥æ›œæ—¥ (Chá»§ nháº­t)", "æ›œæ—¥ (Thá»©)"], mnemonic: "NgÃ y (æ—¥) mÃ  chim (éš¹) hÃ³t vang trá»i lÃ  ngÃ y Ä‘áº¹p (Diá»‡u)." }
            ],
            grammar: [
                { 
                    id: 1, 
                    title: "ï½ã§ã—ã‚‡ã† / ï½ã ã‚ã†", 
                    meaning: "Cháº¯c háº³n lÃ ... / CÃ³ láº½ lÃ ...", 
                    usage: "PhÃ¡n Ä‘oÃ¡n vá»›i Ä‘á»™ tin cáº­y cao hoáº·c tÃ¬m sá»± Ä‘á»“ng tÃ¬nh.",
                    example: "ãŸãã•ã‚“å‹‰å¼·ã—ãŸã‹ã‚‰ã€ãã£ã¨åˆæ ¼ã™ã‚‹ã ã‚ã†ã€‚<br>(VÃ¬ Ä‘Ã£ há»c nhiá»u nÃªn cháº¯c cháº¯n sáº½ Ä‘á»— thÃ´i.)",
                    note: "Thá»ƒ thÆ°á»ng cá»§a ã§ã—ã‚‡ã† lÃ  ã ã‚ã†."
                },
                { 
                    id: 2, 
                    title: "ï½ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“", 
                    meaning: "CÃ³ thá»ƒ lÃ ... / KhÃ´ng biáº¿t chá»«ng...", 
                    usage: "PhÃ¡n Ä‘oÃ¡n vá»›i Ä‘á»™ tin cáº­y tháº¥p (khoáº£ng 50%).",
                    example: "ç´„æŸã®æ™‚é–“ã«é–“ã«åˆã‚ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br>(CÃ³ thá»ƒ tÃ´i sáº½ khÃ´ng ká»‹p giá» háº¹n.)",
                    note: "DÃ¹ng cho cáº£ N, A, V."
                },
                { 
                    id: 3, 
                    title: "ï½ã‚ˆã†ã§ã™ / ï½ã¿ãŸã„ã§ã™", 
                    meaning: "HÃ¬nh nhÆ°... / Giá»‘ng nhÆ°...", 
                    usage: "PhÃ¡n Ä‘oÃ¡n dá»±a trÃªn giÃ¡c quan hoáº·c thÃ´ng tin nghe Ä‘Æ°á»£c.",
                    example: "éš£ã®éƒ¨å±‹ã«èª°ã‹ã„ã‚‹ã‚ˆã†ã§ã™ã€‚<br>(HÃ¬nh nhÆ° cÃ³ ai Ä‘Ã³ á»Ÿ phÃ²ng bÃªn cáº¡nh.)",
                    note: "ã¿ãŸã„ dÃ¹ng nhiá»u trong vÄƒn nÃ³i."
                },
                { 
                    id: 4, 
                    title: "ï½ã¯ãšã§ã™", 
                    meaning: "Cháº¯c cháº¯n lÃ ...", 
                    usage: "PhÃ¡n Ä‘oÃ¡n dá»±a trÃªn lÃ½ do logic, khÃ¡ch quan.",
                    example: "ç”°ä¸­ã•ã‚“ã¯ä»Šã€æ—¥æœ¬ã«ã„ã‚‹ã¯ãšã§ã™ã€‚<br>(Anh Tanaka cháº¯c cháº¯n Ä‘ang á»Ÿ Nháº­t [vÃ¬ tÃ´i biáº¿t lá»‹ch trÃ¬nh].)",
                    note: ""
                }
            ],
            readingText: "å…ˆé€±ã®æ—¥æ›œæ—¥ã€å‹é”ã¨<span class='lookup-word' data-word='ãƒã‚¤ã‚­ãƒ³ã‚°'>ãƒã‚¤ã‚­ãƒ³ã‚°</span>ã«è¡Œãã¾ã—ãŸã€‚å¤©æ°—äºˆå ±ã§ã¯<span class='lookup-word' data-word='å°é¢¨'>å°é¢¨</span>ãŒæ¥ã‚‹<span class='lookup-word' data-word='ã§ã—ã‚‡ã†'>ã§ã—ã‚‡ã†</span>ã¨è¨€ã£ã¦ã„ã¾ã—ãŸãŒã€æœã¯æ™´ã‚Œã¦ã„ã¾ã—ãŸã€‚å±±ã®ä¸Šã¯ç©ºæ°—ãŒ<span class='lookup-word' data-word='ä¹¾ã'>ä¹¾ã„</span>ã¦ã„ã¦ã€ã¨ã¦ã‚‚æ°—æŒã¡ãŒã‚ˆã‹ã£ãŸã§ã™ã€‚ã—ã‹ã—ã€åˆå¾Œã‹ã‚‰æ€¥ã«é›¨ãŒé™ã‚Šå‡ºã—ã¾ã—ãŸã€‚é“ãŒ<span class='lookup-word' data-word='æ··ã‚€'>æ··ã‚“</span>ã§ã„ãŸã®ã§ã€å¸°ã‚‹ã®ãŒé…ããªã‚Šã¾ã—ãŸã€‚æœ¬å½“ã«<span class='lookup-word' data-word='å³ã—ã„'>å³ã—ã„</span>ä¸€æ—¥ã§ã—ãŸãŒã€æ™¯è‰²ã‚’<span class='lookup-word' data-word='æ¥½ã—ã‚€'>æ¥½ã—ã‚€</span>ã“ã¨ãŒã§ãã¾ã—ãŸã€‚"
        };

        // --- 2. State Management ---
        const state = {
            currentTab: 'dashboard',
            roadmap: '3month', // 1month, 3month, 6month
            progress: {
                vocab: 15, // percent
                kanji: 30,
                grammar: 10
            },
            currentFlashcardIndex: 0,
            isFlipped: false
        };

        // --- 3. Logic & Rendering ---

        const app = {
            init: () => {
                app.switchTab('dashboard');
            },

            switchTab: (tabId) => {
                state.currentTab = tabId;
                
                // Update UI Navigation Styles
                document.querySelectorAll('.nav-item').forEach(el => {
                    el.classList.remove('bg-white', 'shadow-sm', 'ring-1', 'ring-stone-200', 'text-stone-800');
                    el.classList.add('text-stone-600');
                });
                const activeNav = document.getElementById(`nav-${tabId}`);
                if(activeNav) {
                    activeNav.classList.add('bg-white', 'shadow-sm', 'ring-1', 'ring-stone-200', 'text-stone-800');
                    activeNav.classList.remove('text-stone-600');
                }

                // Render Content
                const contentDiv = document.getElementById('app-content');
                contentDiv.innerHTML = ''; // Clear
                
                switch(tabId) {
                    case 'dashboard': app.renderDashboard(contentDiv); break;
                    case 'vocab': app.renderVocab(contentDiv); break;
                    case 'kanji': app.renderKanji(contentDiv); break;
                    case 'grammar': app.renderGrammar(contentDiv); break;
                    case 'reading': app.renderReading(contentDiv); break;
                }
            },

            // --- DASHBOARD RENDERER ---
            renderDashboard: (container) => {
                const totalItems = db.vocab.length + db.kanji.length + db.grammar.length;
                let days = 90;
                if(state.roadmap === '1month') days = 30;
                if(state.roadmap === '6month') days = 180;
                
                const dailyItems = Math.ceil(totalItems / days * 5); // Multiplier for realism simulation

                container.innerHTML = `
                    <div class="tab-content max-w-5xl mx-auto space-y-8">
                        <!-- Intro Section -->
                        <div class="space-y-2">
                            <h2 class="text-3xl font-bold text-stone-800">Xin chÃ o, Chiáº¿n binh JLPT! ğŸ‘‹</h2>
                            <p class="text-stone-600">ÄÃ¢y lÃ  trung tÃ¢m chá»‰ huy lá»™ trÃ¬nh Ã´n táº­p N4 cá»§a báº¡n. Dá»¯ liá»‡u Ä‘Æ°á»£c trÃ­ch xuáº¥t tá»« giÃ¡o trÃ¬nh DungMori. HÃ£y chá»n lá»™ trÃ¬nh phÃ¹ há»£p vÃ  báº¯t Ä‘áº§u ngay hÃ´m nay.</p>
                        </div>

                        <!-- Roadmap Selector -->
                        <div class="grid grid-cols-3 gap-4 mb-8">
                            ${['1month', '3month', '6month'].map(plan => `
                                <button onclick="app.setRoadmap('${plan}')" 
                                    class="p-4 rounded-xl border-2 transition-all ${state.roadmap === plan ? 'border-indigo-600 bg-indigo-50 text-indigo-700' : 'border-stone-200 bg-white hover:border-stone-300'}">
                                    <div class="font-bold text-lg mb-1">${plan === '1month' ? 'Tá»‘c Ä‘á»™ (1 ThÃ¡ng)' : plan === '3month' ? 'TiÃªu chuáº©n (3 ThÃ¡ng)' : 'Cháº­m rÃ£i (6 ThÃ¡ng)'}</div>
                                    <div class="text-sm opacity-80">${plan === '1month' ? 'CÆ°á»ng Ä‘á»™ cao' : plan === '3month' ? 'CÃ¢n báº±ng' : 'Nháº¹ nhÃ ng'}</div>
                                </button>
                            `).join('')}
                        </div>

                        <!-- Today's Mission & Stats Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            
                            <!-- Daily Mission Card -->
                            <div class="col-span-1 lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-stone-200">
                                <h3 class="font-bold text-xl mb-4 flex items-center"><span class="mr-2">ğŸ“…</span> Nhiá»‡m vá»¥ hÃ´m nay</h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-3 bg-stone-50 rounded-lg">
                                        <div class="flex items-center">
                                            <span class="bg-blue-100 text-blue-700 p-2 rounded-md mr-3 text-xs font-bold">Tá»ª Vá»°NG</span>
                                            <span>Há»c ${Math.ceil(dailyItems * 0.6)} tá»« má»›i chá»§ Ä‘á» "Cuá»™c sá»‘ng"</span>
                                        </div>
                                        <button onclick="app.switchTab('vocab')" class="text-sm bg-stone-800 text-white px-3 py-1 rounded hover:bg-stone-700">Báº¯t Ä‘áº§u</button>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-stone-50 rounded-lg">
                                        <div class="flex items-center">
                                            <span class="bg-red-100 text-red-700 p-2 rounded-md mr-3 text-xs font-bold">KANJI</span>
                                            <span>Ã”n táº­p ${Math.ceil(dailyItems * 0.2)} chá»¯ bá»™ "Lá»±c" & "Äá»™ng"</span>
                                        </div>
                                        <button onclick="app.switchTab('kanji')" class="text-sm bg-stone-800 text-white px-3 py-1 rounded hover:bg-stone-700">Báº¯t Ä‘áº§u</button>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-stone-50 rounded-lg">
                                        <div class="flex items-center">
                                            <span class="bg-green-100 text-green-700 p-2 rounded-md mr-3 text-xs font-bold">NGá»® PHÃP</span>
                                            <span>Luyá»‡n táº­p máº«u cÃ¢u phÃ¡n Ä‘oÃ¡n</span>
                                        </div>
                                        <button onclick="app.switchTab('grammar')" class="text-sm bg-stone-800 text-white px-3 py-1 rounded hover:bg-stone-700">Báº¯t Ä‘áº§u</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Progress Chart -->
                            <div class="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 flex flex-col items-center justify-center">
                                <h3 class="font-bold text-lg mb-2 w-full text-left">Tiáº¿n Ä‘á»™ tá»•ng quan</h3>
                                <div class="chart-container">
                                    <canvas id="progressChart"></canvas>
                                </div>
                                <div class="mt-4 text-center text-sm text-stone-500">
                                    ÄÃ£ hoÃ n thÃ nh 18% lá»™ trÃ¬nh
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // Initialize Chart
                setTimeout(() => {
                    const ctx = document.getElementById('progressChart').getContext('2d');
                    new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ['HoÃ n thÃ nh', 'ChÆ°a há»c'],
                            datasets: [{
                                data: [18, 82],
                                backgroundColor: ['#4f46e5', '#f3f4f6'],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            cutout: '70%',
                            plugins: {
                                legend: { display: false }
                            }
                        }
                    });
                }, 100);
            },

            setRoadmap: (plan) => {
                state.roadmap = plan;
                app.switchTab('dashboard'); // Re-render
            },

            // --- VOCABULARY RENDERER (Flashcards) ---
            renderVocab: (container) => {
                const card = db.vocab[state.currentFlashcardIndex];
                
                container.innerHTML = `
                    <div class="tab-content max-w-2xl mx-auto h-full flex flex-col items-center justify-center">
                         <div class="text-center mb-6 max-w-lg">
                            <h2 class="text-2xl font-bold text-stone-800 mb-2">Flashcard Tá»« Vá»±ng</h2>
                            <p class="text-stone-600">Luyá»‡n táº­p tá»« vá»±ng vá»›i cháº¿ Ä‘á»™ láº­t tháº». Nháº¥n vÃ o tháº» Ä‘á»ƒ xem nghÄ©a vÃ  cÃ¡ch Ä‘á»c. Dá»¯ liá»‡u tá»« file "Tá»« vá»±ng N4.pdf".</p>
                        </div>

                        <!-- Flashcard Container -->
                        <div class="relative w-full max-w-md h-80 perspective-1000 group cursor-pointer" onclick="app.flipCard()">
                            <div id="flashcard-inner" class="card-flip-inner relative w-full h-full text-center transition-all duration-500 transform-style-3d shadow-xl rounded-2xl ${state.isFlipped ? 'flipped' : ''}">
                                
                                <!-- FRONT -->
                                <div class="absolute w-full h-full backface-hidden bg-white border border-stone-200 rounded-2xl flex flex-col items-center justify-center p-8">
                                    <div class="text-xs font-bold text-stone-400 uppercase tracking-widest mb-4">Word #${card.id}</div>
                                    <div class="text-6xl font-bold text-stone-800 jp-font mb-4">${card.kanji || card.kana}</div>
                                    <div class="text-stone-400 text-sm">(Cháº¡m Ä‘á»ƒ láº­t)</div>
                                </div>

                                <!-- BACK -->
                                <div class="absolute w-full h-full backface-hidden bg-indigo-600 text-white rounded-2xl rotate-y-180 flex flex-col items-center justify-center p-8">
                                    <div class="text-3xl font-bold mb-2 jp-font">${card.kana}</div>
                                    ${card.kanji ? `<div class="text-lg opacity-80 mb-6 jp-font">${card.kanji}</div>` : ''}
                                    <div class="text-xl font-medium mb-2">${card.mean}</div>
                                    <div class="mt-4 px-3 py-1 bg-white/20 rounded-full text-xs font-bold uppercase">${card.type}</div>
                                </div>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="flex items-center justify-between w-full max-w-md mt-8">
                            <button onclick="event.stopPropagation(); app.prevCard()" class="p-3 rounded-full bg-white shadow-md hover:bg-stone-50 border border-stone-200">
                                â¬…ï¸ TrÆ°á»›c
                            </button>
                            <div class="font-bold text-stone-500">${state.currentFlashcardIndex + 1} / ${db.vocab.length}</div>
                            <button onclick="event.stopPropagation(); app.nextCard()" class="p-3 rounded-full bg-indigo-600 text-white shadow-md hover:bg-indigo-700">
                                Tiáº¿p theo â¡ï¸
                            </button>
                        </div>
                    </div>
                `;
            },

            flipCard: () => {
                state.isFlipped = !state.isFlipped;
                const inner = document.getElementById('flashcard-inner');
                if(state.isFlipped) inner.classList.add('flipped');
                else inner.classList.remove('flipped');
            },

            nextCard: () => {
                if (state.currentFlashcardIndex < db.vocab.length - 1) {
                    state.currentFlashcardIndex++;
                    state.isFlipped = false;
                    app.switchTab('vocab');
                }
            },

            prevCard: () => {
                if (state.currentFlashcardIndex > 0) {
                    state.currentFlashcardIndex--;
                    state.isFlipped = false;
                    app.switchTab('vocab');
                }
            },

            // --- KANJI RENDERER (Grid + Modal) ---
            renderKanji: (container) => {
                container.innerHTML = `
                    <div class="tab-content max-w-5xl mx-auto">
                        <div class="mb-8">
                            <h2 class="text-2xl font-bold text-stone-800 mb-2">Kanji & Ghi nhá»›</h2>
                            <p class="text-stone-600">PhÆ°Æ¡ng phÃ¡p ghi nhá»› báº±ng cÃ¢u chuyá»‡n (Mnemonics) vÃ  Space Memory. Dá»¯ liá»‡u tá»« file "Kanji N4.pdf".</p>
                        </div>

                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                            ${db.kanji.map(k => `
                                <div onclick="alert('Máº¹o nhá»›: ${k.mnemonic}\\n\\nTá»« vá»±ng: ${k.words.join(', ')}')" 
                                     class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm hover:shadow-md hover:border-indigo-300 cursor-pointer transition-all group">
                                    <div class="flex justify-between items-start mb-2">
                                        <span class="text-xs font-bold text-stone-400">#${k.id}</span>
                                        <span class="text-xs px-2 py-0.5 bg-stone-100 rounded text-stone-500">N4</span>
                                    </div>
                                    <div class="text-center mb-4">
                                        <div class="text-5xl font-bold text-stone-800 jp-font group-hover:text-indigo-600 transition-colors">${k.char}</div>
                                        <div class="text-sm font-medium text-stone-500 mt-2">${k.mean}</div>
                                    </div>
                                    <div class="border-t border-stone-100 pt-3">
                                        <div class="text-xs text-stone-400 mb-1">Kunyomi</div>
                                        <div class="text-sm text-stone-700 font-mono">${k.kun || '-'}</div>
                                        <div class="text-xs text-stone-400 mt-2 mb-1">Onyomi</div>
                                        <div class="text-sm text-stone-700 font-mono">${k.on}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            },

            // --- GRAMMAR RENDERER (Accordion) ---
            renderGrammar: (container) => {
                container.innerHTML = `
                    <div class="tab-content max-w-3xl mx-auto">
                        <div class="mb-8">
                            <h2 class="text-2xl font-bold text-stone-800 mb-2">Ngá»¯ phÃ¡p N4</h2>
                            <p class="text-stone-600">Danh sÃ¡ch cÃ¡c máº«u ngá»¯ phÃ¡p kÃ¨m giáº£i thÃ­ch tiáº¿ng Viá»‡t vÃ  vÃ­ dá»¥. Dá»¯ liá»‡u tá»« file "Ngá»¯ phÃ¡p N4.pdf".</p>
                        </div>

                        <div class="space-y-4">
                            ${db.grammar.map(g => `
                                <div class="bg-white rounded-xl border border-stone-200 overflow-hidden">
                                    <button onclick="app.toggleAccordion('grammar-${g.id}')" class="w-full text-left p-5 flex justify-between items-center hover:bg-stone-50 transition-colors">
                                        <div class="flex items-center">
                                            <span class="bg-indigo-100 text-indigo-700 font-bold text-xs px-2 py-1 rounded mr-3">BÃ i 15</span>
                                            <span class="font-bold text-lg text-stone-800 jp-font">${g.title}</span>
                                        </div>
                                        <span class="text-stone-400 transform transition-transform" id="icon-grammar-${g.id}">â–¼</span>
                                    </button>
                                    <div id="grammar-${g.id}" class="hidden bg-stone-50 p-5 border-t border-stone-100">
                                        <div class="mb-4">
                                            <h4 class="text-sm font-bold text-stone-500 uppercase mb-1">Ã nghÄ©a & CÃ¡ch dÃ¹ng</h4>
                                            <p class="text-stone-800 font-medium mb-1">${g.meaning}</p>
                                            <p class="text-stone-600 text-sm">${g.usage}</p>
                                            ${g.note ? `<p class="text-xs text-orange-600 mt-1">âš ï¸ ${g.note}</p>` : ''}
                                        </div>
                                        <div>
                                            <h4 class="text-sm font-bold text-stone-500 uppercase mb-2">VÃ­ dá»¥ (Reibun)</h4>
                                            <div class="bg-white p-3 rounded border border-stone-200">
                                                <p class="text-lg jp-font text-stone-800 mb-1">${g.example.split('<br>')[0]}</p>
                                                <p class="text-stone-500 text-sm italic">${g.example.split('<br>')[1] || ''}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            },

            toggleAccordion: (id) => {
                const el = document.getElementById(id);
                const icon = document.getElementById(`icon-${id}`);
                if (el.classList.contains('hidden')) {
                    el.classList.remove('hidden');
                    icon.style.transform = 'rotate(180deg)';
                } else {
                    el.classList.add('hidden');
                    icon.style.transform = 'rotate(0deg)';
                }
            },

            // --- READING RENDERER (Interactive Text) ---
            renderReading: (container) => {
                container.innerHTML = `
                    <div class="tab-content max-w-4xl mx-auto h-full flex flex-col md:flex-row gap-6">
                        <div class="flex-1">
                            <div class="mb-6">
                                <h2 class="text-2xl font-bold text-stone-800 mb-2">Äá»c hiá»ƒu tÆ°Æ¡ng tÃ¡c</h2>
                                <p class="text-stone-600">Click vÃ o cÃ¡c tá»« Ä‘Æ°á»£c gáº¡ch chÃ¢n Ä‘á»ƒ tra nghÄ©a ngay láº­p tá»©c. BÃ i Ä‘á»c máº«u sá»­ dá»¥ng tá»« vá»±ng N4.</p>
                            </div>

                            <div class="bg-white p-8 rounded-2xl border border-stone-200 shadow-sm leading-loose text-xl jp-font text-stone-800">
                                ${db.readingText}
                            </div>
                        </div>

                        <!-- Sidebar Dictionary (Simulated) -->
                        <div class="w-full md:w-80 flex-shrink-0">
                            <div class="sticky top-4 bg-stone-100 p-5 rounded-xl border border-stone-200 h-64 flex flex-col items-center justify-center text-center" id="dict-display">
                                <div class="text-4xl mb-3 text-stone-300">ğŸ“–</div>
                                <p class="text-stone-500 font-medium">Chá»n tá»« trong bÃ i Ä‘á»c Ä‘á»ƒ xem nghÄ©a</p>
                            </div>
                        </div>
                    </div>
                `;

                // Add Event Listeners for Lookup Words
                setTimeout(() => {
                    document.querySelectorAll('.lookup-word').forEach(word => {
                        word.addEventListener('click', (e) => {
                            const term = e.target.getAttribute('data-word');
                            app.lookupWord(term);
                        });
                    });
                }, 100);
            },

            lookupWord: (term) => {
                // Find in DB
                let result = db.vocab.find(v => v.kanji === term || v.kana === term);
                if (!result) {
                    // Try to match partial grammar or fallback
                    result = { kanji: term, kana: 'Unknown', mean: 'Tá»« nÃ y chÆ°a cÃ³ trong database máº«u.', type: '?' };
                    // Check grammar
                    if(term.includes('ã§ã—ã‚‡ã†')) {
                        result = { kanji: 'ã§ã—ã‚‡ã†', kana: 'deshou', mean: 'CÃ³ láº½, cháº¯c lÃ  (PhÃ¡n Ä‘oÃ¡n)', type: 'Grammar' };
                    }
                }

                const display = document.getElementById('dict-display');
                display.classList.remove('items-center', 'justify-center', 'text-center');
                display.innerHTML = `
                    <div class="w-full text-left">
                        <div class="text-xs font-bold text-indigo-600 uppercase mb-1">Káº¿t quáº£ tra tá»«</div>
                        <div class="text-3xl font-bold text-stone-800 jp-font mb-1">${result.kanji || result.kana}</div>
                        ${result.kanji ? `<div class="text-sm text-stone-500 mb-3">${result.kana}</div>` : ''}
                        <div class="border-t border-stone-300 my-2"></div>
                        <div class="text-lg font-medium text-stone-800">${result.mean}</div>
                        <div class="mt-2 inline-block px-2 py-1 bg-stone-200 rounded text-xs font-bold text-stone-600">${result.type}</div>
                    </div>
                `;
            }
        };

        // Initialize App
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });

    </script>
    
    <!-- Chosen Palette: Zen Focus (Warm Neutrals + Indigo/Emerald Accents) -->
    <!-- Application Structure Plan: 
         1. Dashboard: Acts as the "Roadmap" controller requested. It synthesizes progress across all skills.
         2. Tabbed Navigation: Separates cognitive loads (Vocab, Kanji, Grammar, Reading) as requested.
         3. Flashcard View: Dedicated focus mode for vocabulary.
         4. Reading View: Implements the "click-to-lookup" feature specifically requested.
         5. The structure allows for easy expansion (adding more JSON data) without breaking the UI.
    -->
    <!-- Visualization & Content Choices:
         - Chart.js Doughnut: Used in Dashboard to give immediate visual feedback on Roadmap progress.
         - CSS 3D Transforms: Used for Flashcards (no heavy libraries needed).
         - Tailwind Grid/Flex: Used for Kanji matrix and Layouts.
         - Interactive Text (Span Wrapping): Used for Reading to simulate a dictionary engine.
    -->
    <!-- CONFIRMATION: NO SVG graphics used (Unicode/CSS used instead). NO Mermaid JS used. -->
</body>
</html>
